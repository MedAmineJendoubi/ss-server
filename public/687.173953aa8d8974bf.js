"use strict";(self.webpackChunksuper_service=self.webpackChunksuper_service||[]).push([[687],{2687:(C,r,o)=>{o.r(r),o.d(r,{GeneralDetailsModule:()=>D});var e=o(1514),c=o(4522),g=o(8260);let f=(()=>{class t{constructor(n){this._http=n,this.uri=g.N.serverUrl}getMyHistory(){const n={headers:new c.WM({"Access-Control-Allow-Origin":"*","mon-entete-personnalise":"maValeur"})};return this._http.get(`${this.uri}api/v1/client/rq/my-history`,n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(c.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=o(4404),a=o(6019);function d(t,i){1&t&&(e.TgZ(0,"section",2),e.TgZ(1,"span",3),e._uU(2,"Pas d'historique disponible."),e.qZA(),e.qZA())}function m(t,i){1&t&&e._UZ(0,"span",20)}function _(t,i){1&t&&e._UZ(0,"span",21)}function x(t,i){if(1&t&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" Devis ",n.ref_devis," ")}}function Z(t,i){if(1&t&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE(" Client ",n.nom," ",n.prenom," ")}}function h(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",11),e.TgZ(2,"div",12),e.YNc(3,m,1,0,"span",13),e.YNc(4,_,1,0,"span",14),e.TgZ(5,"div",15),e.TgZ(6,"div",16),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",17),e.YNc(12,x,2,1,"span",18),e.YNc(13,Z,2,2,"span",18),e.TgZ(14,"span",19),e._uU(15),e.ALo(16,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&t){const n=i.$implicit;e.xp6(3),e.Q6J("ngIf","Bonus utilis\xe9"==n.type),e.xp6(1),e.Q6J("ngIf","Bonus utilis\xe9"!=n.type),e.xp6(4),e.hij("",n.montant," Franc"),e.xp6(2),e.Oqu(n.type),e.xp6(2),e.Q6J("ngIf",n.ref_devis),e.xp6(1),e.Q6J("ngIf",n.nom),e.xp6(2),e.hij(" ",e.xi3(16,7,n.created_at,"d/M/yyyy")," ")}}function v(t,i){if(1&t&&(e.TgZ(0,"section",2),e.TgZ(1,"header",4),e.TgZ(2,"div",5),e.TgZ(3,"span",6),e._uU(4,"Historique Bonus"),e.qZA(),e.TgZ(5,"span",7),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"main",8),e.TgZ(8,"div",9),e.YNc(9,h,17,10,"ng-container",10),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(6),e.hij("Reste ",n.rest," DHF"),e.xp6(3),e.Q6J("ngForOf",n.bonus_and_spendings)}}const T=function(){return{"opacity-50":!1}};function y(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit;return e.oxw(2).goToQuizz(l)}),e._uU(2," Recevez un bonus ! "),e.qZA(),e.qZA()}2&t&&(e.xp6(1),e.Q6J("disabled",!1)("ngClass",e.DdM(2,T)))}function A(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"div",15),e.TgZ(4,"div",25),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",26),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,y,3,3,"div",27),e.qZA(),e.BQk()),2&t){const n=i.$implicit;e.xp6(6),e.hij("",n.montant," Franc"),e.xp6(2),e.Oqu(n.cause),e.xp6(3),e.Oqu(e.xi3(12,4,n.date,"d/M/yyyy")),e.xp6(2),e.Q6J("ngIf",0==n.is_activated)}}function w(t,i){if(1&t&&(e.TgZ(0,"section",2),e.TgZ(1,"header",4),e.TgZ(2,"div",5),e.TgZ(3,"span",6),e._uU(4,"Historique Devis"),e.qZA(),e._UZ(5,"span",7),e.qZA(),e.qZA(),e.TgZ(6,"main",8),e.TgZ(7,"div",9),e.YNc(8,A,14,7,"ng-container",10),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(8),e.Q6J("ngForOf",n.devis)}}const b=[{path:"",component:(()=>{class t{constructor(n,s){this._generalDetailsService=n,this.router=s,this.bonus_and_spendings=[],this.rest=0,this.items=[],this.devis=[]}ngOnInit(){this._generalDetailsService.getMyHistory().subscribe(n=>{console.log("res",n),this.devis=n.devis,this.createBonusAndSpendingsArray(n.bonus,n.bonus_spent),console.log("this :",this.bonus_and_spendings,this.rest)})}createBonusAndSpendingsArray(n,s){this.bonus_and_spendings=null==s?void 0:s.concat(n),this.rest=this.bonus_and_spendings.map(l=>"Bonus utilis\xe9"==l.type?-l.montant:l.montant).reduce((l,p)=>l+p,0),console.log("bonus :",this.bonus_and_spendings)}goToQuizz(n){console.log("item DEVIS:",n),this.router.navigate(["/satisfaction-quizz/"+n.id])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-general-details"]],decls:4,vars:3,consts:[[1,"overflow-auto","h-full","pb-16","flex","flex-col","items-start","xl:items-center","no-scrollbar"],["class","w-full pt-4 sm:pt-6",4,"ngIf"],[1,"w-full","pt-4","sm:pt-6"],[1,"text-black","font-medium","text-3xl"],[1,"w-full","flex","items-center","justify-center"],[1,"flex","flex-grow","items-center","justify-between","max-w-2xl"],[1,"text-black","font-bold","text-3xl"],[1,"font-bold","text-green-600","text-3xl","text-right"],[1,"w-full"],[1,"flex","flex-col","sm:items-center","justify-items-stretch","items-stretch"],[4,"ngFor","ngForOf"],[1,"max-w-2xl","sm:w-5/6","py-4","px-4","bg-white","shadow-xl","rounded-lg","my-4"],[1,"flex","w-full","items-center","justify-items-stretch"],["class","flex-shrink-0 bg-gray-400 h-5 w-5 m-2 rounded-full",4,"ngIf"],["class","flex-shrink-0 bg-green-400 h-5 w-5 m-2 rounded-full",4,"ngIf"],[1,"flex","flex-grow","items-center","justify-between"],[1,"flex","flex-col","items-start","justify-between","font-medium","px-2"],[1,"flex","flex-col","items-end","justify-between","text-right","text-sm","font-normal","text-gray-500","tracking-wide"],["class","block",4,"ngIf"],[1,"block","text-right"],[1,"flex-shrink-0","bg-gray-400","h-5","w-5","m-2","rounded-full"],[1,"flex-shrink-0","bg-green-400","h-5","w-5","m-2","rounded-full"],[1,"block"],[1,"max-w-2xl","sm:w-5/6","py-4","px-4","bg-white","shadow-xl","rounded-lg","my-4","flex","flex-col","items-center","w-full"],[1,"flex","w-full","items-center","justify-between"],[1,"flex","flex-col","items-start","justify-between"],[1,"flex","flex-col","items-end","justify-between","text-right"],[4,"ngIf"],[1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-green-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500",3,"disabled","ngClass","click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e.YNc(1,d,3,0,"section",1),e.YNc(2,v,10,2,"section",1),e.YNc(3,w,9,1,"section",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",0==s.bonus_and_spendings.length&&0==s.devis.length),e.xp6(1),e.Q6J("ngIf",0!=s.bonus_and_spendings.length),e.xp6(1),e.Q6J("ngIf",0!=s.devis.length))},directives:[a.O5,a.sg,a.mk],pipes:[a.uU],styles:[""]}),t})()}];var q=o(1382);let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild(b),q.m]]}),t})()}}]);